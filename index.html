<!doctype html>
<html lang="mk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ü—Ä–æ–Ω–∞—ò–¥–∏ –≥–æ –ø–∞–º–µ—Ç–Ω–æ—Ç–æ –≥—Ä–µ–µ—ö–µ –∑–∞ —Ç–≤–æ—ò–æ—Ç –¥–æ–º</title>
<meta name="description" content="–û–¥–≥–æ–≤–æ—Ä–∏ –Ω–∞ 8 –∫—Ä–∞—Ç–∫–∏ –ø—Ä–∞—à–∞—ö–∞ –∏ –¥–æ–±–∏—ò –±–µ—Å–ø–ª–∞—Ç–Ω–∞ –ø—Ä–æ—Ü–µ–Ω–∫–∞ –∫–æ–ª–∫—É –±–∏ —á–∏–Ω–µ–ª–∞ –∏–¥–µ–∞–ª–Ω–∞—Ç–∞ Samsung —Ç–æ–ø–ª–æ—Ç–Ω–∞ –ø—É–º–ø–∞ –∑–∞ —Ç–≤–æ—ò–æ—Ç –¥–æ–º." />
<style>
  :root{
    --bg:#ffffff; --text:#111827; --muted:#6b7280; --border:#e5e7eb; --card:#ffffff;
    --accent:#E2231A; --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.06);
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif}
  img{max-width:100%;display:block}
  .wrap{min-height:100dvh;display:flex;flex-direction:column}
  header{position:sticky;top:0;background:rgba(255,255,255,.85);backdrop-filter:blur(6px);border-bottom:1px solid var(--border);z-index:10}
  .container{max-width:980px;margin:0 auto;padding:16px}
  .logo{display:flex;justify-content:center;align-items:center;height:64px}
  .logo img{height:40px;object-fit:contain}

  .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}

  /* Welcome card (image above text) */
  .welcome{overflow:hidden}
  .welcome .hero-img{width:100%;height:auto;display:block}
  .welcome .content{padding:18px}
  h1{font-size:clamp(22px,4.5vw,36px);margin:0 0 8px}
  p.lead{font-size:clamp(14px,3.8vw,18px);opacity:.95;margin:0 0 16px}
  .btn{display:inline-flex;align-items:center;gap:8px;background:var(--accent);color:#fff;border:none;border-radius:999px;padding:12px 18px;font-weight:700;cursor:pointer;transition:transform .05s ease;box-shadow:0 6px 16px rgba(226,35,26,.3)}
  .btn:active{transform:translateY(1px)}
  .btn[disabled]{opacity:.6;cursor:default}
  .btn-secondary{background:#fff;color:var(--accent);border:1px solid var(--accent)}

  /* Quiz */
  .quiz{padding:18px 16px 90px}
  .progress{height:8px;background:#f3f4f6;border-radius:999px;overflow:hidden;margin:8px 0 16px}
  .progress>span{display:block;height:100%;background:var(--accent);width:0%;transition:width .25s}
  .q-title{font-size:22px;font-weight:800;margin:4px 0 12px}
  .q-sub{color:var(--muted);margin:0 0 12px;font-size:14px}

  /* Uniform cards (no icons) */
  .grid{display:grid;gap:12px;grid-template-columns:1fr}
  @media(min-width:560px){ .grid{grid-template-columns:repeat(2,1fr)} }
  @media(min-width:900px){ .grid{grid-template-columns:repeat(4,1fr)} }

  .opt{display:flex;justify-content:center;align-items:center;text-align:center;
       padding:14px;border:1px solid var(--border);border-radius:12px;background:#fff;
       cursor:pointer;transition:border-color .15s, box-shadow .15s; min-height:60px}
  .opt:hover{border-color:#d1d5db;box-shadow:0 8px 18px rgba(0,0,0,.06)}
  .opt[data-selected='true']{border-color:var(--accent);box-shadow:0 0 0 3px rgba(226,35,26,.15)}
  .field{display:flex;flex-direction:column;gap:6px}
  .input{padding:12px 12px;border:1px solid var(--border);border-radius:12px;font-size:16px}
  .row{display:grid;gap:10px;grid-template-columns:1fr}
  @media(min-width:560px){ .row-3{grid-template-columns:2fr 1fr 1fr} }
  .consent{display:flex;gap:10px;align-items:flex-start;margin-top:8px;font-size:13px;color:#374151}
  .consent input{margin-top:3px}
  .nav{display:flex;justify-content:space-between;gap:10px;margin-top:14px}
  .hidden{display:none !important}

  /* Success */
  .success{min-height:60dvh;display:flex;flex-direction:column;justify-content:flex-end;border-radius:var(--radius);overflow:hidden;position:relative}
  .success::before{content:'';position:absolute;inset:0;
    background:url('https://i.postimg.cc/HLsTSx8J/vizual-2.png') center/cover no-repeat;
    filter:brightness(.8)}
  .success .content{position:relative;color:#fff;padding:18px}
  .phone{font-weight:800;letter-spacing:.5px;margin-top:8px}

  footer{text-align:center;color:#6b7280;font-size:12px;padding:18px}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="container">
        <div class="logo">
          <img src="https://invensis.com.mk/wp-content/uploads/2023/04/cropped-cropped-cropped-logo-2ki-e1680670915655.png" alt="Invensis logo" />
        </div>
      </div>
    </header>

    <main class="container">
      <!-- Welcome -->
      <section id="welcome" class="card welcome">
        <img class="hero-img" src="https://i.postimg.cc/8CPTy5fc/Vizual-1.png" alt="Samsung —Ç–æ–ø–ª–æ—Ç–Ω–∞ –ø—É–º–ø–∞ - –¥–æ–º">
        <div class="content">
          <h1>–ü—Ä–æ–Ω–∞—ò–¥–∏ –≥–æ –Ω–∞—ò –ø–∞–º–µ—Ç–Ω–æ—Ç–æ –≥—Ä–µ–µ—ö–µ –∑–∞ —Ç–≤–æ—ò–æ—Ç –¥–æ–º –∑–∞ 30 —Å–µ–∫—É–Ω–¥–∏.</h1>
          <p class="lead">–û–¥–≥–æ–≤–æ—Ä–∏ –Ω–∞ 8 –∫—Ä–∞—Ç–∫–∏ –ø—Ä–∞—à–∞—ö–∞ –∏ –¥–æ–±–∏—ò –±–µ—Å–ø–ª–∞—Ç–Ω–∞ –ø—Ä–æ—Ü–µ–Ω–∫–∞ –∫–æ–ª–∫—É –±–∏ —á–∏–Ω–µ–ª–∞ –∏–¥–µ–∞–ª–Ω–∞—Ç–∞ Samsung —Ç–æ–ø–ª–æ—Ç–Ω–∞ –ø—É–º–ø–∞ –∑–∞ —Ç–≤–æ—ò–æ—Ç –¥–æ–º.</p>
          <button class="btn" id="startBtn">–ó–∞–ø–æ—á–Ω–∏ ‚Üí</button>
        </div>
      </section>

      <!-- Quiz -->
      <section id="quiz" class="quiz hidden">
        <div class="progress"><span id="progressBar"></span></div>
        <div id="qArea" class="card" style="padding:14px"></div>
        <div class="nav">
          <button class="btn btn-secondary" id="backBtn">–ù–∞–∑–∞–¥</button>
          <button class="btn" id="nextBtn">—Å–ª–µ–¥–Ω–æ</button>
        </div>
      </section>

      <!-- Success -->
      <section id="success" class="card success hidden">
        <div class="content">
          <h1>–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º–µ, —Ç–≤–æ—ò–∞—Ç–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞ –ø—Ä–æ—Ü–µ–Ω–∫–∞ –µ –ø—Ä–∏–º–µ–Ω–∞!</h1>
          <p class="lead">–ù–∞—à–∏–æ—Ç —Ç–∏–º –æ–¥ Invensis —ú–µ —Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–∏—Ä–∞ –≤–æ –Ω–∞—ò–∫—É—Å –º–æ–∂–µ–Ω —Ä–æ–∫ –∑–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏–º–µ —Ç–æ—á–Ω–∞ –ø—Ä–æ—Ü–µ–Ω–∫–∞ –∑–∞ —Ç–≤–æ—ò–æ—Ç –¥–æ–º.</p>
          <div class="phone">üìû +389 (0) 2 3254 355</div>
        </div>
      </section>
    </main>

    <footer>¬© 2025 Invensis - –ö–æ–Ω—Ç–∞–∫—Ç: +389 (0) 2 3254 355</footer>
  </div>

<script>
/* ====== GOOGLE SHEETS WEB APP URL (set) ====== */
const GAS_URL = "https://script.google.com/macros/s/AKfycbw_mannm2Ur9ZolrFy57A9Y2y3mEf5TwUKc28LRsDmBHGIbu8hTWwDBCYqqodmp8Hmk/exec";
/* ============================================= */

let step = 0;
const answers = { utm_source: new URLSearchParams(location.search).get('utm_source')||'' };

const startBtn = document.getElementById('startBtn');
const welcome = document.getElementById('welcome');
const quiz = document.getElementById('quiz');
const success = document.getElementById('success');
const qArea = document.getElementById('qArea');
const backBtn = document.getElementById('backBtn');
const nextBtn = document.getElementById('nextBtn');
const progressBar = document.getElementById('progressBar');

/* Steps (no icons) */
const steps = [
  { key:'home_type', title:'–ö–∞–∫–æ–≤ –¥–æ–º –∏–º–∞—à?', render: () => cardGrid([
    '–ö—É—ú–∞','–î–≤–æ–∫–∞—Ç–Ω–∞ –∫—É—ú–∞','–°—Ç–∞–Ω','–î—Ä—É–≥–æ'
  ]) },
  { key:'size', title:'–ö–æ–ª–∫–∞–≤–∞ –µ –∫–≤–∞–¥—Ä–∞—Ç—É—Ä–∞—Ç–∞ –Ω–∞ —Ç–≤–æ—ò–æ—Ç –¥–æ–º?', render: () => cardGrid([
    '–ü–æ–¥ 100m¬≤','100 - 150m¬≤','150 - 200m¬≤','–ù–∞–¥ 200m¬≤'
  ]) },
  { key:'current_heating', title:'–ö–∞–∫–æ –º–æ–º–µ–Ω—Ç–∞–ª–Ω–æ —Å–µ –≥—Ä–µ–µ—à?', render: () => cardGrid([
    '–ö–ª–∏–º–∞ —É—Ä–µ–¥','–ü–∞—Ä–Ω–æ / –µ–ª–µ–∫—Ç—Ä–∏—á–µ–Ω –∫–æ—Ç–µ–ª','–î—Ä–≤–∞','–ü–µ–ª–µ—Ç–∏','–ö–æ–º–±–∏–Ω–∏—Ä–∞–Ω–æ','–ù–µ–º–∞–º —Å–∏—Å—Ç–µ–º, –±–∞—Ä–∞–º –Ω–æ–≤–æ —Ä–µ—à–µ–Ω–∏–µ'
  ]) },
  { key:'timeline', title:'–ö–æ–≥–∞ –ø–ª–∞–Ω–∏—Ä–∞—à –¥–∞ –≥–æ –ø–æ—Å—Ç–∞–≤–∏—à –Ω–æ–≤–∏–æ—Ç —Å–∏—Å—Ç–µ–º –∑–∞ –≥—Ä–µ–µ—ö–µ?', render: () => cardGrid([
    '–®—Ç–æ –ø–æ—Å–∫–æ—Ä–æ (–≤–æ –Ω–∞—Ä–µ–¥–Ω–∏–≤–µ 30 –¥–µ–Ω–∞)','–í–æ —Å–ª–µ–¥–Ω–∏—Ç–µ 2-3 –º–µ—Å–µ—Ü–∏','–í–æ —Å–ª–µ–¥–Ω–∏—Ç–µ 6 –º–µ—Å–µ—Ü–∏','–°–∞–º–æ —Ä–∞–∑–≥–ª–µ–¥—É–≤–∞–º –æ–ø—Ü–∏–∏'
  ]) },
  { key:'financing', title:'–ö–∞–∫–æ –ø–ª–∞–Ω–∏—Ä–∞—à –¥–∞ –ø–ª–∞—Ç–∏—à?', render: () => cardGrid([
    '–å–µ –ø–ª–∞—Ç–∞–º –≤–æ –≥–æ—Ç–æ–≤–æ','–°–∞–∫–∞–º –¥–∞ –≤–∏–¥–∞–º –æ–ø—Ü–∏—ò–∞ –∑–∞ –ø–ª–∞—ú–∞—ö–µ –Ω–∞ —Ä–∞—Ç–∏','–°√® —É—à—Ç–µ –Ω–µ —Å—É–º —Å–∏–≥—É—Ä–µ–Ω - —Å–∞–∫–∞–º —Å–æ–≤–µ—Ç'
  ]) },
  { key:'address', title:'–í–Ω–µ—Å–∏ —ò–∞ –∞–¥—Ä–µ—Å–∞—Ç–∞ –Ω–∞ —Ç–≤–æ—ò–æ—Ç –¥–æ–º', render: () => formAddress() },
  { key:'contact', title:'–ü–æ—Å–ª–µ–¥–µ–Ω —á–µ–∫–æ—Ä ‚Äî –∑–∞ –¥–∞ —Ç–∏ —ò–∞ –∏—Å–ø—Ä–∞—Ç–∏–º–µ –ø—Ä–æ—Ü–µ–Ω–∫–∞—Ç–∞', render: () => formContact() },
];

function cardGrid(labels){
  const opts = labels.map(label =>
    '<div class="opt" data-value="'+label+'" onclick="selectOption(\''+label.replace(/"/g,'&quot;')+'\', this)">'+
      '<div>'+label+'</div></div>'
  ).join('');
  return '<div class="grid">'+opts+'</div>';
}

function formAddress(){
  const v = answers.address||{};
  return ''
   + '<div class="field">'
   + '<label class="q-sub">–ê–¥—Ä–µ—Å–∞</label>'
   + '<input id="addr" class="input" placeholder="–£–ª. –ü—Ä–∏–º–µ—Ä 12" value="'+(v.addr||'')+'" required>'
   + '</div>'
   + '<div class="row row-3" style="margin-top:10px">'
   +   '<div class="field"><label class="q-sub">–ì—Ä–∞–¥</label>'
   +   '<input id="city" class="input" placeholder="–°–∫–æ–ø—ò–µ" value="'+(v.city||'')+'" required></div>'
   +   '<div class="field"><label class="q-sub">–ü–æ—à—Ç–µ–Ω—Å–∫–∏ –∫–æ–¥</label>'
   +   '<input id="zip" class="input" placeholder="1000" value="'+(v.zip||'')+'" pattern="\\d{4}" required></div>'
   + '</div>';
}

function formContact(){
  const v = answers.contact||{};
  return ''
   + '<div class="field"><label class="q-sub">–ò–º–µ –∏ –ø—Ä–µ–∑–∏–º–µ</label>'
   + '<input id="fullName" class="input" placeholder="–ò–º–µ –ü—Ä–µ–∑–∏–º–µ" value="'+(v.name||'')+'" required></div>'
   + '<div class="row" style="margin-top:10px">'
   +   '<div class="field"><label class="q-sub">–¢–µ–ª–µ—Ñ–æ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ)</label>'
   +   '<input id="phone" class="input" placeholder="+389 7x xxx xxx" value="'+(v.phone||'')+'"></div>'
   +   '<div class="field"><label class="q-sub">–ï-–ø–æ—à—Ç–∞</label>'
   +   '<input id="email" class="input" type="email" placeholder="you@example.com" value="'+(v.email||'')+'" required></div>'
   + '</div>'
   + '<label class="consent"><input id="consent" type="checkbox" required> <span>–°–æ –∏—Å–ø—Ä–∞—ú–∞—ö–µ –Ω–∞ —Ñ–æ—Ä–º—É–ª–∞—Ä–æ—Ç, —Å–µ —Å–æ–≥–ª–∞—Å—É–≤–∞–º –º–æ–∏—Ç–µ –ø–æ–¥–∞—Ç–æ—Ü–∏ –¥–∞ –±–∏–¥–∞—Ç –∫–æ—Ä–∏—Å—Ç–µ–Ω–∏ –∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç –∏ –∏–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –ø–æ–Ω—É–¥–∞.</span></label>';
}

function setProgress(){ progressBar.style.width = ((step+1)/steps.length*100)+'%'; }

function render(){
  setProgress();
  const s = steps[step];
  qArea.innerHTML = '<div class="q-title">'+s.title+'</div>' + s.render();
  nextBtn.textContent = step === steps.length-1 ? '–ò—Å–ø—Ä–∞—Ç–∏ –∏ –¥–æ–±–∏—ò –±–µ—Å–ø–ª–∞—Ç–Ω–∞ –ø—Ä–æ—Ü–µ–Ω–∫–∞ ‚Üí' : '—Å–ª–µ–¥–Ω–æ';
  backBtn.style.visibility = step===0 ? 'hidden' : 'visible';
  if(['home_type','size','current_heating','timeline','financing'].includes(s.key) && answers[s.key]) {
    [...qArea.querySelectorAll('.opt')].forEach(d=>{ if(d.dataset.value===answers[s.key]) d.setAttribute('data-selected','true'); });
  }
}

window.selectOption = (label, el) => {
  [...qArea.querySelectorAll('.opt')].forEach(d=>d.removeAttribute('data-selected'));
  el.setAttribute('data-selected','true');
  const key = steps[step].key;
  answers[key] = label;
};

function validateStep(){
  const key = steps[step].key;
  if(['home_type','size','current_heating','timeline','financing'].includes(key)) return !!answers[key];
  if(key==='address'){
    const addr = qArea.querySelector('#addr').value.trim();
    const city = qArea.querySelector('#city').value.trim();
    const zip = qArea.querySelector('#zip').value.trim();
    const validZip = /^\d{4}$/.test(zip);
    if(!addr || !city || !validZip) return false;
    answers.address = {addr, city, zip};
    return true;
  }
  if(key==='contact'){
    const name = qArea.querySelector('#fullName').value.trim();
    const phone = qArea.querySelector('#phone').value.trim();
    const email = qArea.querySelector('#email').value.trim();
    const consent = qArea.querySelector('#consent').checked;
    if(!name || !email || !consent) return false;
    answers.contact = {name, phone, email};
    return true;
  }
  return true;
}

async function submitForm(){
  nextBtn.disabled = true;
  nextBtn.textContent = '–°–µ –∏—Å–ø—Ä–∞—ú–∞‚Ä¶';
  try {
    const payload = {
      timestamp: new Date().toISOString(),
      home_type: answers.home_type||'',
      size: answers.size||'',
      current_heating: answers.current_heating||'',
      timeline: answers.timeline||'',
      financing: answers.financing||'',
      address: answers.address?.addr||'',
      city: answers.address?.city||'',
      zip: answers.address?.zip||'',
      name: answers.contact?.name||'',
      phone: answers.contact?.phone||'',
      email: answers.contact?.email||'',
      user_agent: navigator.userAgent,
      referrer: document.referrer,
    };

    if(!GAS_URL || GAS_URL.startsWith('REPLACE_')) throw new Error('Missing Google Apps Script URL');

    // text/plain keeps it simple and avoids CORS preflight
    const res = await fetch(GAS_URL, {
      method:'POST',
      headers:{'Content-Type':'text/plain;charset=utf-8'},
      body: JSON.stringify(payload)
    });

    if(!res.ok) throw new Error('Bad response');
    showSuccess();
  } catch(e) {
    alert('–ù–∞—Å—Ç–∞–Ω–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏—Å–ø—Ä–∞—ú–∞—ö–µ—Ç–æ. –í–µ –º–æ–ª–∏–º–µ –æ–±–∏–¥–µ—Ç–µ —Å–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ.');
    nextBtn.disabled = false;
    nextBtn.textContent = '—Å–ª–µ–¥–Ω–æ';
  }
}

function showSuccess(){
  quiz.classList.add('hidden');
  success.classList.remove('hidden');
  window.scrollTo({top:0, behavior:'smooth'});
}

startBtn?.addEventListener('click', ()=>{
  welcome.classList.add('hidden');
  quiz.classList.remove('hidden');
  step = 0;
  render();
});
backBtn.addEventListener('click', ()=>{ if(step>0){ step--; render(); } });
nextBtn.addEventListener('click', ()=>{
  if(!validateStep()) return alert('–í–µ –º–æ–ª–∏–º–µ –ø–æ–ø–æ–ª–Ω–µ—Ç–µ –≥–∏ –ø–æ—Ç—Ä–µ–±–Ω–∏—Ç–µ –ø–æ–ª–∏—ö–∞.');
  if(step < steps.length-1) { step++; render(); }
  else submitForm();
});
</script>
</body>
</html>
